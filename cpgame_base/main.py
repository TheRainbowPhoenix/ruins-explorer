# main.py
# The main entry point for the entire game. Clean and simple.
import gint
# from micropython import opt_level
# opt_level(3)
# from gint import gint.dclear, gint.dtext, gint.dupdate, gint.C_WHITE, gint.C_BLACK, gint.DWIDTH, gint.DHEIGHT, gint.image, gint.dimage, gint.dsize

# Splash screen
gint.dclear(gint.C_WHITE)
msg = "LOADING..."
sz = gint.dsize(msg, None)[0]
gint.dtext(gint.DWIDTH-sz-8, gint.DHEIGHT-26, gint.C_BLACK, msg)
gint.dimage(gint.DWIDTH-sz-40, gint.DHEIGHT-42, gint.image(4, 17, 25, 39, 25, b'\x80\x80\x80\x80\x90\x90\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x90\x90\x80\x80\x80\x80\x80\x80\x80\x90\x8f\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x8f\x8f\x90\x80\x80\x80\x80\x80\x80\x80\x90\x8f\x8f\x90\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x90\x8f\x90\x90\x90\x80\x80\x80\x80\x80\x80\x90\x90\x8e\x8e\x90\x80\x8f\x8f\x8f\x8f\x8f\x8f\x80\x8f\x8e\x8f\x90\x90\x90\x80\x80\x80\x80\x80\x8f\x90\x90\x8e\x8e\x8e\x8f\x8f\x8e\x8e\x8e\x8e\x8f\x8f\x8e\x8e\x8e\x90\x90\x8f\x8f\x80\x80\x80\x80\x90\x8f\x8a\x90\x8f\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8f\x8e\x8a\x90\x8e\x90\x80\x80\x80\x80\x90\x85\x8a\x8b\x8f\x8e\x8f\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x85\x8a\x85\x90\x80\x80\x80\x80\x90\x8a\x90\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8e\x8f\x8a\x85\x8f\x80\x80\x80\x80\x80\x8f\x8e\x89\x8e\x8e\x8e\x8f\x8e\x8e\x8e\x8e\x8f\x8e\x8e\x88\x89\x8e\x8f\x8f\x80\x80\x80\x80\x80\x8f\x8f\x8e\x89\x89\x8e\x8e\x8f\x88\x8e\x8f\x89\x8f\x8e\x89\x89\x89\x8e\x8f\x8f\x8f\x80\x80\x80\x80\x90\x8f\x8e\x8e\x8e\x8e\x8f\x8f\x8e\x88\x8e\x8e\x8f\x8e\x8e\x8e\x8e\x8e\x8f\x8f\x8f\x80\x80\x80\x80\x90\x8e\x8e\x8e\x8e\x8f\x8f\x8f\x8e\x8e\x8e\x8e\x90\x8f\x8e\x8e\x8e\x8e\x8f\x8e\x8f\x80\x80\x80\x8f\x8f\x8e\x8e\x8e\x8e\x8f\x90\x83\x8f\x8e\x8e\x8e\x82\x90\x8f\x8f\x8e\x8e\x8e\x8e\x8f\x8f\x90\x90\x8e\x8e\x8e\x8f\x8e\x8f\x8f\x8f\x8f\x8f\x8e\x8e\x8e\x8f\x8f\x8f\x8f\x8f\x8f\x8f\x8e\x8e\x8f\x80\x80\x8f\x8f\x8f\x8f\x8f\x8f\x83\x83\x83\x82\x8f\x8e\x86\x83\x83\x83\x90\x8f\x8f\x8f\x8f\x8f\x80\x80\x80\x80\x8f\x8f\x8f\x8f\x8f\x90\x90\x90\x82\x8f\x8f\x83\x90\x90\x90\x8f\x8f\x8f\x8f\x8f\x90\x80\x80\x80\x80\x8f\x90\x8e\x8f\x8f\x87\x87\x90\x82\x82\x82\x82\x90\x87\x87\x90\x8f\x8e\x8f\x8f\x90\x80\x80\x80\x80\x8f\x90\x8e\x8e\x8f\x87\x84\x90\x82\x82\x82\x82\x90\x84\x87\x90\x8f\x8e\x8f\x8f\x90\x80\x80\x80\x8f\x8f\x90\x8e\x8e\x8f\x81\x81\x90\x82\x82\x82\x82\x8f\x81\x81\x90\x8f\x8e\x8f\x8f\x90\x80\x80\x80\x8f\x8f\x90\x8e\x8e\x8f\x86\x82\x82\x82\x82\x82\x82\x82\x82\x83\x90\x8f\x8e\x8f\x8f\x90\x80\x80\x8f\x8e\x8f\x8f\x8e\x8e\x8e\x90\x83\x82\x82\x83\x83\x82\x83\x83\x88\x8e\x8f\x8e\x8f\x8f\x8f\x80\x80\x8f\x8e\x8f\x8f\x8f\x8f\x8e\x8f\x90\x83\x83\x83\x83\x83\x83\x90\x8f\x8e\x8e\x8f\x8f\x8f\x8f\x80\x80\x8f\x8e\x8f\x8e\x8f\x8e\x8e\x90\x8e\x8f\x8e\x8e\x8e\x8e\x8f\x8f\x8f\x8e\x8e\x8f\x8f\x8f\x8f\x80\x80\x8f\x8f\x8f\x8f\x8f\x8f\x8f\x90\x86\x8c\x83\x86\x83\x89\x8d\x83\x89\x8f\x8f\x8f\x8f\x8f\x8f\x80\x80\x90\x8f\x8f\x8f\x8f\x8d\x8d\x8f\x88\x86\x83\x83\x83\x83\x89\x8c\x8e\x8f\x8f\x8b\x8f\x8f\x8f\x80\x80\x8f\x8f\x8f\x90\x8b\x8b\x8f\x8f\x8d\x86\x86\x83\x86\x83\x86\x8d\x8d\x8c\x8b\x8f\x90\x8f\x8f\x80\x80\x80\x8f\x8f\x90\x8b\x8b\x8f\x90\x8b\x8d\x8b\x8d\x83\x8c\x8d\x8b\x8b\x8b\x8b\x8b\x90\x8f\x8f\x80\x80\x80\x8f\x8f\x8d\x8d\x8d\x8f\x90\x8b\x8b\x8c\x8d\x86\x8c\x8c\x8b\x8b\x8b\x8f\x8d\x90\x8f\x90\x80\x80\x80\x8f\x8f\x90\x8b\x8b\x8f\x90\x8f\x8f\x90\x8f\x90\x8f\x8f\x8f\x8f\x8e\x8f\x86\x8f\x8b\x90\x80\x80\x80\x8f\x89\x89\x8e\x8f\x90\x90\x8e\x8f\x89\x86\x86\x89\x8e\x8e\x8f\x89\x8e\x8f\x8f\x8d\x90\x80\x80\x80\x8f\x8e\x86\x90\x8f\x90\x8f\x8f\x8d\x8e\x8f\x8e\x8e\x8f\x8f\x8d\x8f\x90\x8e\x8f\x8e\x90\x80\x80\x80\x90\x8f\x83\x90\x8f\x8f\x8b\x8b\x8d\x86\x8c\x8d\x89\x8c\x8c\x8c\x8b\x8f\x83\x8f\x89\x90\x80\x80\x80\x80\x90\x90\x90\x8f\x8f\x8d\x8d\x86\x8b\x8c\x8b\x89\x8b\x8b\x8b\x8d\x8f\x83\x8e\x89\x90\x80\x80\x80\x80\x80\x90\x90\x90\x90\x8e\x89\x83\x83\x83\x8f\x8c\x86\x86\x86\x8b\x8f\x90\x90\x90\x80\x80\x80\x80\x80\x80\x80\x80\x80\x90\x8f\x8f\x8f\x90\x90\x8f\x90\x8f\x8f\x8f\x90\x90\x90\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x8f\x86\x83\x82\x86\x90\x82\x82\x86\x8f\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x8f\x83\x82\x82\x86\x90\x83\x83\x86\x90\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x8f\x83\x83\x83\x83\x90\x90\x90\x90\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x90\x90\x90\x90\x90\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80\x80', b'\xff\xff\xe7I\xfe\x94\xe5*\xce\x83eq\xbbF|\x01r\x89jdLN\x1a\'\x12\x89\x01\x89A"\x18\x81\x00\x00'))
gint.dupdate()
del msg
del sz

# Import data and load game

import time
from cpgame.engine.game import Game
from cpgame.game_scenes.templar_scene import TemplarScene
from cpgame.game_scenes.templewa_scene import TemplewaScene
from cpgame.game_scenes.geodash_scene import GeoDashScene
from cpgame.game_scenes.promenad_scene import PromenadScene

def main():
    """Initializes and runs the game, starting with the MenuScene."""
    game = Game()
    # try:
    # game.start(TemplarScene)
    # game.start(TemplewaScene)
    # game.start(GeoDashScene)
    game.start(PromenadScene)
    # except Exception as e:
    #     # This provides a clean crash screen on PC for easier debugging.
    #     gint.dclear(gint.C_WHITE)
    #     gint.dtext(5, 5, gint.C_BLACK, "FATAL ERROR:")
    #     # Try to print the error message line by line
    #     try:
    #         error_lines = str(e).split('\n')
    #         for i, line in enumerate(error_lines):
    #             gint.dtext(5, 25 + i * 15, gint.C_BLACK, line)
    #     except:
    #         gint.dtext(5, 25, gint.C_BLACK, "Could not display error.")
    #     gint.dupdate()
    #     time.sleep(10)


# main()

if __name__ == '__main__':
    main()
else:
    main()